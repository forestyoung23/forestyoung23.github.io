---
title: 多线程的挑战
date: 2020-05-09 00:40:25
categories: 多线程
tags: 多线程问题

---

![](http://oss.forestyoung.top/autumn-4875907_1920.jpg)

<!--more-->

### 多线程的挑战

- 上下文切换
- 死锁

#### 上下文切换

> 单核处理器也可通过CPU给每个线程分配时间片来实现多线程，因为时间片非常短，让人感觉是多个线程同时执行。
>
> 问题：切换过程中需要保存上一个任务的状态以便后面切回时恢复

|   循环次数   |   串行执行耗时/ms   |   并发执行耗时/ms   |   并发比串行快多少   |
| :---- | :---- | :---- | :---- |
|   1万   |   0   |   1   |   慢   |
|   10万   |   2   |   3   |   慢   |
|   100万   |   5   |   5   |   差不多   |
|   1000万   |   9   |   6   |   1.5倍   |
|   1亿   |   54   |   31   |   接近1倍   |

