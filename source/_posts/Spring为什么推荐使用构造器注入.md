---
title: Spring为什么推荐使用构造器注入
date: 2021-04-22 19:55:33
tags: Spring
---

![](https://tva1.sinaimg.cn/large/008i3skNgy1gpsrr59v7lj31900u07jq.jpg)

<!--more-->

# 背景

Spring常用的三种注入方式分别是：

- 字段注入
- 构造器注入
- setter方法注入

日常开发用的较多的是字段注入和构造器注入

# 总结

使用构造器注入的优势

1. 保证依赖不可变（final关键字）
2. 保证依赖不为空（省去了我们对其检查）
3. 保证返回客户端（调用）的代码的时候是完全初始化的状态
4. 避免了循环依赖
5. 提升了代码的可复用性

下面来简单的解释一下：

- 依赖不可变：其实说的就是final关键字，这里不再多解释了。不明白的园友可以回去看看Java语法。
- 依赖不为空（省去了我们对其检查）：当要实例化FooController的时候，由于自己实现了有参数的构造函数，所以不会调用默认构造函数，那么就需要Spring容器传入所需要的参数，所以就两种情况：1、有该类型的参数->传入，OK 。2：无该类型的参数->报错。所以保证不会为空，Spring总不至于传一个null进去吧 
- 完全初始化的状态：这个可以跟上面的依赖不为空结合起来，向构造器传参之前，要确保注入的内容不为空，那么肯定要调用依赖组件的构造方法完成实例化。而在Java类加载实例化的过程中，构造方法是最后一步（之前如果有父类先初始化父类，然后自己的成员变量，最后才是构造方法，这里不详细展开。）。所以返回来的都是初始化之后的状态。

# 参考资料

https://www.cnblogs.com/joemsu/p/7688307.html

https://spring.io/blog/2007/07/11/setter-injection-versus-constructor-injection-and-the-use-of-required/

